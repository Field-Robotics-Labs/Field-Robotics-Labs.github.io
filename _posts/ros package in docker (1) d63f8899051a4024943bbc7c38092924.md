# ros package in docker (1)

# 1. docker start

## 1. ë„ì»¤ ì»¨í…Œì´ë„ˆ ì—´ê¸°

â†’ tmp í´ë”ë¥¼ ì—°ê²°ì‹œì¼œ íŒŒì¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•¨ 

sudo docker run --name gpu-tree-detection_0.1 -it --privileged \
--env="DISPLAY=0:0" -v=/tmp/.X11-unix:/tmp/.X11-unix --device /dev/bus/usb \
-v=/dev:/dev -v=/tmp:/tmp -w=/home --gpus all \
--network=host gpu-tree-detection/0.1 

## 1.2 docker ëŒ€í™”í˜• ì‹¤í–‰

sudo xhost +local:docker  
sudo docker exec -it 860411ac1b09   /bin/bash

# 2. code Down

```
# tree code download
git clone https://github.com/leggedrobotics/tree_detection.git 

# in your source folder `src`
git clone https://github.com/ANYbotics/grid_map.git 

# ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ëª¨ë‘ ì„¤ì¹˜ (ì¤‘ìš”) 
**sudo rosdep install -yr --from-paths .

# jsk package ì„¤ì¹˜
sudo apt install ros-noetic-jsk-visualization** 

```

# 3. Build

`catkin build tree_detection_ros`

`catkin build grid_map_rviz_plugin`

# 4. dataset ì •ë³´

## 4.1 5ê°€ì§€ ë°ì´í„°ì…‹ ë‹¤ìš´

[https://drive.google.com/drive/folders/1m_sRtMN5n6-ShQvnbCfedKIVpoupao5u](https://drive.google.com/drive/folders/1m_sRtMN5n6-ShQvnbCfedKIVpoupao5u) 

4ë²ˆì§¸ì™€ 5ë²ˆì§¸ëŠ” ì•„ë˜ì— í•´ë‹¹í•¨

[https://norlab.ulaval.ca/research/montmorencydataset/](https://norlab.ulaval.ca/research/montmorencydataset/) 

## 4.2 ë°ì´í„° ì´ë™

ì•„ë˜ í´ë”ë¡œ ì´ë™ 

/catkin_ws/src/tree_detection/tree_detection_ros/data 

# 5. ì‹¤í–‰

# 6. ì—ëŸ¬ ëŒ€ì‘

ë””ë²„ê·¸ ì •ë³´ê°€ í¬í•¨ëœ ëª¨ë“œì—ì„œ ë¹Œë“œí•œ ë‹¤ìŒ gdbë¡œ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

[http://wiki.ros.org/roslaunch/Tutorials/Roslaunch%20Nodes%20in%20Valgrind%20or%20GDB](http://wiki.ros.org/roslaunch/Tutorials/Roslaunch%20Nodes%20in%20Valgrind%20or%20GDB)

catkin ì‘ì—… ê³µê°„ì—ì„œ ì´ ëª…ë ¹ì„ ì‹¤í–‰í•˜ê³  ë‹¤ì‹œ ë¹Œë“œí•œ ë‹¤ìŒ gdbë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆê¹Œ?

`catkin config -DCMAKE_BUILD_TYPE=RelWithDebInfo`

tree_Detection.launchì˜ 5ë²ˆì§¸ ì¤„ì—ì„œ ì‹œì‘ ì ‘ë‘ì‚¬ë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•­ìƒ gdbë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤í–‰í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” ë‹¨ì§€ ë””ë²„ê¹…ì„ ìœ„í•œ ê²ƒì…ë‹ˆë‹¤.

ë‚´ ìƒê°ì—” ë¦´ë¦¬ìŠ¤ ëª¨ë“œì—ì„œ ì»´íŒŒì¼í•˜ë©´ ì„¸ê·¸í´íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ì½”ë“œì˜ ì¼ë¶€ê°€ ìµœì í™”ë˜ë¯€ë¡œ ì´ ì†”ë£¨ì…˜ì´ ì‘ë™í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ì „ì— ì»´íŒŒì¼ì„ í–ˆì„ ë•Œì—ëŠ” Release ëª¨ë“œë¡œ ì»´íŒŒì¼ì„ í•˜ì§€ ì•Šì•„ ë¬¸ì œê°€ ë˜ëŠ” ì½”ë“œ ë¶€ë¶„ì´ ìµœì í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŠ” ì–´ë”˜ê°€ì— ì¡°ì‚¬í•´ì•¼ í•  ë¬¸ì œê°€ ìˆë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤ ğŸ™ˆ

ë¬¸ì œê°€ ì™„ì „íˆ í•´ê²°ë  ë•Œê¹Œì§€ ì´ ë¬¸ì œë¥¼ ì—´ì–´ ë‘ê² ìŠµë‹ˆë‹¤.

[ì˜ì–´ë²„ì „](https://www.notion.so/3ad3e1011c984a358c91603a3096e6ea?pvs=21)

# 7. ë„ì»¤ í—ˆë¸Œ ì—…ë¡œë“œ

- docker push airossw/ros_env:tagname
- docker push airossw/gpu_tree_detection:0.1